# Travis CI
#
#

sudo: required
dist: trusty
language: generic
python:
  - "2.7"

env:
  matrix:
    - "TEST=activeweb"
    - "TEST=activeweb-jackson"
    - "TEST=akka-http"
    - "TEST=aleph"
    - "TEST=aspnet"
    - "TEST=aspnet-jsonnet"
    - "TEST=aspnet-mongodb-raw"
    - "TEST=aspnet-mono"
    - "TEST=aspnet-mono-jsonnet"
    - "TEST=aspnet-mono-mysql-entityframework"
    - "TEST=aspnet-mono-mysql-raw"
    - "TEST=aspnet-mono-servicestack"
    - "TEST=aspnet-mysql-entityframework"
    - "TEST=aspnet-mysql-raw"
    - "TEST=aspnet-postgresql-entityframework"
    - "TEST=aspnet-postgresql-raw"
    - "TEST=aspnet-servicestack"
    - "TEST=aspnet-sqlserver-entityframework"
    - "TEST=aspnet-sqlserver-raw"
    - "TEST=aspnet-stripped"
    - "TEST=aspnet-stripped-mongodb-raw"
    - "TEST=aspnet-stripped-mysql-raw"
    - "TEST=aspnet-stripped-postgresql-raw"
    - "TEST=aspnet-stripped-sqlserver-raw"
    - "TEST=aspnetcore"
    - "TEST=aspnetcore-middleware-dapper"
    - "TEST=aspnetcore-middleware-ef"
    - "TEST=aspnetcore-middleware-json"
    - "TEST=aspnetcore-middleware-raw"
    - "TEST=aspnetcore-mvc-dapper"
    - "TEST=aspnetcore-mvc-ef"
    - "TEST=aspnetcore-mvc-linux"
    - "TEST=aspnetcore-mvc-linux-json"
    - "TEST=aspnetcore-mvc-raw"
    - "TEST=aspnetcore-mvc-weblistener"
    - "TEST=aspnetcore-mvc-win"
    - "TEST=aspnetcore-weblistener"
    - "TEST=aspnetcore-win"
    - "TEST=asyncio"
    - "TEST=asyncio-dbs"
    - "TEST=asyncio-json"
    - "TEST=asyncio-mysql"
    - "TEST=asyncio-plaintext"
    - "TEST=baratine"
    - "TEST=bayou"
    - "TEST=beego"
    - "TEST=beyondj"
    - "TEST=bottle"
    - "TEST=bottle-mysql-raw"
    - "TEST=bottle-nginx-uwsgi"
    - "TEST=bottle-py3"
    - "TEST=bottle-pypy"
    - "TEST=cakephp"
    - "TEST=cherrypy"
    - "TEST=cherrypy-py3"
    - "TEST=chicagoboss"
    - "TEST=clancats"
    - "TEST=codeigniter"
    - "TEST=codeigniter-hhvm"
    - "TEST=codeigniter-raw"
    - "TEST=codeigniter-raw_hhvm"
    - "TEST=colossus"
    - "TEST=compojure"
    - "TEST=compojure-raw"
    - "TEST=comsat-servlet"
    - "TEST=comsat-servlet-undertow"
    - "TEST=comsat-webactors"
    - "TEST=comsat-webactors-undertow"
    - "TEST=cowboy"
    - "TEST=cpoll_cppsp"
    - "TEST=cpoll_cppsp-postgres-raw"
    - "TEST=cpoll_cppsp-postgres-raw-threadpool"
    - "TEST=cpoll_cppsp-raw"
    - "TEST=crystal-raw"
    - "TEST=curacao"
    - "TEST=cutelyst"
    - "TEST=cutelyst-mysql-raw"
    - "TEST=cutelyst-nginx"
    - "TEST=cutelyst-nginx-mysql-raw"
    - "TEST=cutelyst-nginx-postgres-raw"
    - "TEST=cutelyst-postgres-raw"
    - "TEST=cutelyst-thread"
    - "TEST=cutelyst-thread-mysql-raw"
    - "TEST=cutelyst-thread-postgres-raw"
    - "TEST=cygnite"
    - "TEST=cygnite-raw"
    - "TEST=dancer"
    - "TEST=dart"
    - "TEST=django"
    - "TEST=django-postgresql"
    - "TEST=django-py3"
    - "TEST=dropwizard"
    - "TEST=dropwizard-mongodb"
    - "TEST=dropwizard-postgres"
    - "TEST=duda"
    - "TEST=echo"
    - "TEST=elixir-cowboy"
    - "TEST=elli"
    - "TEST=evhttp-sharp"
    - "TEST=express"
    - "TEST=express-mongodb"
    - "TEST=express-mysql"
    - "TEST=falcon"
    - "TEST=falcon-py3"
    - "TEST=falcon-pypy"
    - "TEST=falcore"
    - "TEST=fasthttp"
    - "TEST=fasthttp-postgresql"
    - "TEST=fat-free"
    - "TEST=fat-free-raw"
    - "TEST=ffead-cpp"
    - "TEST=ffead-cpp-apache2-mongo"
    - "TEST=ffead-cpp-apache2-mysql"
    - "TEST=ffead-cpp-apache2-postgresql"
    - "TEST=ffead-cpp-mysql"
    - "TEST=ffead-cpp-nginx-mongo"
    - "TEST=ffead-cpp-nginx-mysql"
    - "TEST=ffead-cpp-nginx-postgresql"
    - "TEST=ffead-cpp-postgresql"
    - "TEST=finagle"
    - "TEST=finatra"
    - "TEST=finch"
    - "TEST=fintrospect"
    - "TEST=flask"
    - "TEST=flask-mysql-raw"
    - "TEST=flask-nginx-uwsgi"
    - "TEST=flask-py3"
    - "TEST=flask-pypy"
    - "TEST=flask-pypy-mysql-raw"
    - "TEST=fuel"
    - "TEST=gemini"
    - "TEST=gemini-mysql"
    - "TEST=gemini-postgres"
    - "TEST=gin"
    - "TEST=go"
    - "TEST=go-interpolate"
    - "TEST=go-mongo"
    - "TEST=go-postgres"
    - "TEST=go-prefork"
    - "TEST=goji"
    - "TEST=grails"
    - "TEST=grape"
    - "TEST=grape-thin"
    - "TEST=grape-unicorn"
    - "TEST=grizzly"
    - "TEST=grizzly-jersey"
    - "TEST=h2o"
    - "TEST=hapi"
    - "TEST=hapi-mysql"
    - "TEST=hapi-postgres"
    - "TEST=haywire"
    - "TEST=hexagon"
    - "TEST=hhvm"
    - "TEST=historical"
    - "TEST=hot"
    - "TEST=hot-mongodb"
    - "TEST=http-kit"
    - "TEST=http-kit-raw"
    - "TEST=http4s"
    - "TEST=hyper"
    - "TEST=iron"
    - "TEST=jawn"
    - "TEST=jester"
    - "TEST=jetty"
    - "TEST=jetty-servlet"
    - "TEST=jlhttp"
    - "TEST=jooby"
    - "TEST=kami"
    - "TEST=kelp"
    - "TEST=kelp-mongodb"
    - "TEST=kemal"
    - "TEST=klein"
    - "TEST=koa"
    - "TEST=lapis"
    - "TEST=laravel"
    - "TEST=laravel-hhvm"
    - "TEST=laravel-hhvm-raw"
    - "TEST=laravel-php5"
    - "TEST=laravel-php5-raw"
    - "TEST=laravel-raw"
    - "TEST=libreactor"
    - "TEST=limonade"
    - "TEST=lithium"
    - "TEST=lumen"
    - "TEST=luminus"
    - "TEST=lwan"
    - "TEST=lwan-mysql"
    - "TEST=lwan-sqlite"
    - "TEST=mochiweb"
    - "TEST=mojolicious"
    - "TEST=nancy"
    - "TEST=nancy-mono"
    - "TEST=netty"
    - "TEST=ngx_mruby"
    - "TEST=nickel"
    - "TEST=ninja-standalone"
    - "TEST=nodejs"
    - "TEST=nodejs-mongodb"
    - "TEST=nodejs-mongodb-raw"
    - "TEST=nodejs-mysql"
    - "TEST=nodejs-postgres"
    - "TEST=octane"
    - "TEST=octopus"
    - "TEST=officefloor"
    - "TEST=onion"
    - "TEST=onion-raw"
    - "TEST=openresty"
    - "TEST=padrino"
    - "TEST=padrino-thin"
    - "TEST=padrino-unicorn"
    - "TEST=pedestal"
    - "TEST=permeagility"
    - "TEST=phalcon"
    - "TEST=phalcon-mongodb"
    - "TEST=phoenix"
    - "TEST=php"
    - "TEST=php-kohana"
    - "TEST=php-kohana-raw"
    - "TEST=php-phalcon-micro"
    - "TEST=php-php5"
    - "TEST=php-php5-raw"
    - "TEST=php-phpixie"
    - "TEST=php-raw7"
    - "TEST=phreeze"
    - "TEST=plack"
    - "TEST=play1"
    - "TEST=play2"
    - "TEST=play2-java-ebean-hikaricp"
    - "TEST=play2-java-jpa-hikaricp"
    - "TEST=play2-scala"
    - "TEST=play2-scala-anorm-linux"
    - "TEST=play2-scala-anorm-windows"
    - "TEST=play2-scala-reactivemongo"
    - "TEST=play2-scala-slick"
    - "TEST=poco"
    - "TEST=pyramid"
    - "TEST=pyramid-py2"
    - "TEST=rack"
    - "TEST=rack-thin"
    - "TEST=rack-unicorn"
    - "TEST=rails"
    - "TEST=rails-stripped"
    - "TEST=rails-thin"
    - "TEST=rails-unicorn"
    - "TEST=rapidoid"
    - "TEST=rapidoid-http-fast"
    - "TEST=rapidoid-mysql"
    - "TEST=rapidoid-postgres"
    - "TEST=redstone"
    - "TEST=redstone-mongodb"
    - "TEST=restexpress"
    - "TEST=restexpress-mysql-raw"
    - "TEST=revel"
    - "TEST=revel-jet"
    - "TEST=revel-qbs"
    - "TEST=revel-raw"
    - "TEST=revenj"
    - "TEST=revenj-jvm"
    - "TEST=revenj-windows"
    - "TEST=ringojs"
    - "TEST=ringojs-convenient"
    - "TEST=s-server"
    - "TEST=sabina"
    - "TEST=sabina-jetty-mongodb"
    - "TEST=sabina-jetty-mysql"
    - "TEST=sabina-undertow-mysql"
    - "TEST=sailsjs"
    - "TEST=sailsjs-postgres"
    - "TEST=scruffy"
    - "TEST=servant"
    - "TEST=servicestack"
    - "TEST=servicestack-iis-mongodb"
    - "TEST=servicestack-iis-mysql"
    - "TEST=servicestack-iis-postgresql"
    - "TEST=servicestack-iis-sqlserver"
    - "TEST=servicestack-nginx-default"
    - "TEST=servlet"
    - "TEST=servlet-postgres-raw"
    - "TEST=servlet-raw"
    - "TEST=silex"
    - "TEST=silex-orm"
    - "TEST=silex-raw"
    - "TEST=silicon"
    - "TEST=sinatra"
    - "TEST=sinatra-sequel"
    - "TEST=sinatra-thin"
    - "TEST=sinatra-unicorn"
    - "TEST=slim"
    - "TEST=slim-hhvm"
    - "TEST=slim-php5"
    - "TEST=snap"
    - "TEST=spark"
    - "TEST=spock"
    - "TEST=spray"
    - "TEST=spring"
    - "TEST=start"
    - "TEST=stream"
    - "TEST=symfony2"
    - "TEST=symfony2-hhvm"
    - "TEST=symfony2-php-templates"
    - "TEST=symfony2-raw"
    - "TEST=symfony2-stripped"
    - "TEST=symfony2-stripped-php-templates"
    - "TEST=symfony2-stripped-raw"
    - "TEST=tapestry"
    - "TEST=tokio-minihttp"
    - "TEST=tornado"
    - "TEST=tornado-postgresql-raw"
    - "TEST=tornado-py3"
    - "TEST=treefrog"
    - "TEST=treefrog-hybrid"
    - "TEST=treefrog-mongodb"
    - "TEST=treefrog-postgres"
    - "TEST=turbogears"
    - "TEST=ulib"
    - "TEST=ulib-json"
    - "TEST=ulib-mongodb"
    - "TEST=ulib-mysql"
    - "TEST=ulib-postgres"
    - "TEST=undertow"
    - "TEST=undertow-jersey-c3p0"
    - "TEST=undertow-jersey-hikaricp"
    - "TEST=undertow-mongodb"
    - "TEST=undertow-mysql"
    - "TEST=undertow-postgresql"
    - "TEST=urweb"
    - "TEST=urweb-mysql"
    - "TEST=uwsgi"
    - "TEST=uwsgi-nginx-uwsgi"
    - "TEST=vertx"
    - "TEST=vertx-web"
    - "TEST=vertx-web-mongodb"
    - "TEST=vertx-web-mysql"
    - "TEST=vertx-web-postgres"
    - "TEST=vibed"
    - "TEST=vibed-ldc"
    - "TEST=wai"
    - "TEST=web-simple"
    - "TEST=web2py"
    - "TEST=web2py-optimized"
    - "TEST=webgo"
    - "TEST=weppy"
    - "TEST=weppy-nginx-uwsgi"
    - "TEST=weppy-py3"
    - "TEST=weppy-pypy"
    - "TEST=wheezyweb"
    - "TEST=wheezyweb-py3"
    - "TEST=wicket"
    - "TEST=wildfly-ee7"
    - "TEST=wsgi"
    - "TEST=wt"
    - "TEST=wt-postgres"
    - "TEST=yaf"
    - "TEST=yesod"
    - "TEST=yesod-mongodb-raw"
    - "TEST=yesod-postgres"
    - "TEST=yii2"
    - "TEST=yii2-hhvm"
    - "TEST=zend"
    - "TEST=zend1"

before_script:
  # travis_clean.sh takes care of some services that are baked into the travis
  # build. Using language: generic gets us an ubuntu build with fewer services,
  # but includes database installs, ruby and rvm installs, and others that interfere
  # with running the suite in a clean ubuntu install.
  - source ./toolset/travis/travis_clean.sh

  # travis_setup.sh runs all the same commands you would run if you were setting up
  # a development environment via:
  # http://frameworkbenchmarks.readthedocs.io/en/latest/Development/Installation-Guide/
  - source ./toolset/travis/travis_setup.sh

script:
  # run-ci.py runs the diffing to see if travis needs to test this framework. Ideally/eventually,
  # we'd like to try and do the diffing before travis_clean & setup.
  # This will run the tests exactly as you would in your own vm:
  # ./toolset/run-tests.py --mode verify --test (all the valid tests for this framework)
  - ./toolset/run-tests.py --mode verify --test "$TEST"

cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.cache/pip
