language: python
python: 
  - "2.7"

env:
  matrix:

    # Group tests by directory to logically break up travis-CI build. Otherwise
    # we end up starting ~200+ different workers. Seems that ~100 is the limit
    # before their website starts to lag heavily
    #
    # Here's the bash if you need to update this. Be sure to maintain the 
    # lines that are currently commented out (these cannot run in Travis)
    #   cd frameworks 
    #   find . -type d -depth 2 | sed 's|./|    - "TESTDIR=|' | sed 's/$/"/g'
    #
    #  
    - "TESTDIR=C/lwan"
    - "TESTDIR=C"
    - "TESTDIR=CSharp"
    - "TESTDIR=C++"
    - "TESTDIR=Clojure"
    - "TESTDIR=Dart"
    - "TESTDIR=Elixir"
    - "TESTDIR=Erlang"
    - "TESTDIR=Go"
    - "TESTDIR=Groovy"
    - "TESTDIR=Haskell"
    - "TESTDIR=Java"
    - "TESTDIR=JavaScript"
    - "TESTDIR=Lua"
    - "TESTDIR=Nim"
    - "TESTDIR=Perl"
    - "TESTDIR=PHP"
    - "TESTDIR=Python"
    - "TESTDIR=Racket"
    - "TESTDIR=Ruby"
    - "TESTDIR=Scala"
    - "TESTDIR=Ur"

before_install:
  # Need to install python modules before using 
  # python
  - pip install -r config/python_requirements.txt

  # Configure Travis-CI build environment for TFB
  #   e.g. setup databases, users, etc
  - ./toolset/run-ci.py cisetup "$TESTDIR"

addons:
  postgresql: "9.3" 

install:
  # Install prerequisites
  - ./toolset/run-ci.py prereq "$TESTDIR"
  
  # Install software for this framework  
  - ./toolset/run-ci.py install "$TESTDIR"
   
script: 
  # Pick one test in this directory and verify
  - time ./toolset/run-ci.py verify "$TESTDIR"
  
